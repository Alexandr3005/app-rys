"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[200],{3200:(E,g,a)=>{a.r(g),a.d(g,{AuthRoutingModule:()=>k});var l=a(8616);class f{}var r=a(4006),t=a(4650),d=a(6518),p=a(6895),m=a(4463);function _(e,s){1&e&&(t.TgZ(0,"div",14),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"User not found or wrong credentials")," "))}function v(e,s){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Enter a valid email")," "))}function w(e,s){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Enter a valid password"),""))}const h=function(e){return{error:e}};let C=(()=>{class e{constructor(o,n,i){this.router=o,this.authService=n,this.formBuilder=i,this.user=new f,this.loginError=!1}ngOnInit(){this.loginForm=this.formBuilder.group({email:["",[r.kI.required]],password:["",[r.kI.required]]})}invalidField(o){return this.loginForm.controls[o].invalid&&(this.loginForm.controls[o].touched||this.loginForm.controls[o].dirty)}onSubmit(){this.loginForm.valid?(this.user.email=this.loginForm.controls.email.value,this.user.password=this.loginForm.controls.password.value,this.login()):Object.values(this.loginForm.controls).forEach(o=>o.markAsTouched())}login(){this.authService.login(this.user).subscribe(o=>{this.authService.currentUser=o,this.router.navigate(["/home"])},o=>{console.error(o),this.loginError=!0})}logout(){this.authService.logout()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(l.F0),t.Y36(d.e),t.Y36(r.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:28,vars:22,consts:[[1,"d-flex","justify-content-center"],["src","/assets/img/logo.png"],[1,"alert-center"],["class","alert alert-danger alert-container",4,"ngIf"],[1,"container"],[1,"d-flex","justify-content-center",3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","email","formControlName","email","id","email","name","email","placeholder","Email",1,"form-control",3,"ngClass"],[4,"ngIf"],["for","password"],["type","password","formControlName","password","id","password","name","password","placeholder","Password",1,"form-control",3,"ngClass"],["type","submit",1,"btn","btn-primary"],["id","register","routerLink","/auth/register-user",1,"btn"],[1,"alert","alert-danger","alert-container"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"img",1),t.qZA(),t.TgZ(2,"div",2),t.YNc(3,_,3,3,"div",3),t.qZA(),t.TgZ(4,"div",4)(5,"form",5),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(6,"div")(7,"div",6)(8,"label",7),t._uU(9),t.ALo(10,"translate"),t.qZA(),t._UZ(11,"input",8),t.YNc(12,v,3,3,"span",9),t.qZA(),t._UZ(13,"br"),t.TgZ(14,"div",6)(15,"label",10),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._UZ(18,"input",11),t.YNc(19,w,3,3,"span",9),t.qZA(),t._UZ(20,"br")(21,"br"),t.TgZ(22,"button",12),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"button",13),t._uU(26),t.ALo(27,"translate"),t.qZA()()()()),2&o&&(t.xp6(3),t.Q6J("ngIf",n.loginError),t.xp6(2),t.Q6J("formGroup",n.loginForm),t.xp6(4),t.Oqu(t.lcZ(10,10,"Email address")),t.xp6(2),t.Q6J("ngClass",t.VKq(18,h,n.invalidField("email"))),t.xp6(1),t.Q6J("ngIf",n.invalidField("email")),t.xp6(4),t.Oqu(t.lcZ(17,12,"Password")),t.xp6(2),t.Q6J("ngClass",t.VKq(20,h,n.invalidField("password"))),t.xp6(1),t.Q6J("ngIf",n.invalidField("password")),t.xp6(4),t.Oqu(t.lcZ(24,14,"Login")),t.xp6(3),t.hij(" ",t.lcZ(27,16,"Sign up")," "))},dependencies:[p.mk,p.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,l.rH,m.X$],styles:["span[_ngcontent-%COMP%]{color:red;font-size:13px}.container[_ngcontent-%COMP%]{border-radius:5px;padding:20px;max-width:500px;width:100%}.alert-container[_ngcontent-%COMP%]{max-width:500px;width:100%;text-align:center}.alert-center[_ngcontent-%COMP%]{display:flex;justify-content:center}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.form-control[_ngcontent-%COMP%]{width:280px}.error[_ngcontent-%COMP%]{border-color:red}#register[_ngcontent-%COMP%]{margin-left:30px;border-color:#007bff;color:#007bff;font-weight:700;border-width:2px;width:125px}#register[_ngcontent-%COMP%]:hover{border-color:#007bff;background-color:#007bff;font-weight:700;color:#fff;border-width:2px}.btn-primary[_ngcontent-%COMP%]{font-weight:700;border-width:2px;width:127px}a[_ngcontent-%COMP%]{text-decoration:none}"]}),e})(),b=(()=>{class e{constructor(o){this.router=o}ngOnInit(){}volverHome(){this.router.navigate([""])}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(l.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-logout"]],decls:6,vars:3,consts:[[2,"text-align","center"],[1,"btn","btn-primary",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"logout works!"),t.qZA(),t.TgZ(2,"div",0)(3,"button",1),t.NdJ("click",function(){return n.volverHome()}),t._uU(4),t.ALo(5,"translate"),t.qZA()()),2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"Back to Home")))},dependencies:[m.X$]}),e})();var Z=a(2817);function A(e,s){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.invalidField("email")?t.lcZ(2,1,"Enter a valid email"):t.lcZ(3,3,"This email is already registered")," ")}}function x(e,s){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Enter your name and surname")," "))}function U(e,s){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"The password must have a minimum of 6 characters"),""))}function q(e,s){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Passwords must match")))}function P(e,s){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Enter a correct number phone"),""))}const u=function(e){return{error:e}};let F=(()=>{class e{constructor(o,n,i){this.authService=o,this.formBuilder=n,this.router=i,this.user=new f,this.showAlert=!1,this.emailExists=!1,this.submitted=!1}ngOnInit(){this.registerForm=this.formBuilder.group({email:["",[r.kI.required,r.kI.pattern(/^\S+@\S+\.\S+$/)]],fullName:["",[r.kI.required,r.kI.pattern(/^[a-zA-Z]+(\s[a-zA-Z]+)+$/)]],password:["",[r.kI.required,r.kI.minLength(6)]],confirmPassword:["",[]],phone:["",[r.kI.required,r.kI.pattern(/^\d{9}$/)]]},{validator:this.checkPasswords})}checkPasswords(o){return o.controls.password.value===o.controls.confirmPassword.value?null:{notSame:!0}}invalidField(o){return this.registerForm.controls[o].invalid&&(this.registerForm.controls[o].touched||this.registerForm.controls[o].dirty)}isConfirmPasswordInvalid(){const o=this.registerForm.controls.confirmPassword;return this.registerForm.hasError("notSame")&&o.touched}onSubmit(){this.registerForm.valid?(this.user.email=this.registerForm.controls.email.value,this.user.fullName=this.registerForm.controls.fullName.value,this.user.password=this.registerForm.controls.password.value,this.user.confirmPassword=this.registerForm.controls.confirmPassword.value,this.user.phone=this.registerForm.controls.phone.value,this.userRegister()):Object.values(this.registerForm.controls).forEach(o=>o.markAsTouched())}userRegister(){this.authService.register(this.user).subscribe(o=>{this.authService.currentUser=o,this.router.navigate(["/home"])},o=>{console.error(o),this.emailExists=!0})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(d.e),t.Y36(r.qu),t.Y36(l.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-register-user"]],decls:48,vars:42,consts:[[1,"d-flex","justify-content-center","mb-4"],["src","/assets/img/logo.png"],[1,"container"],[1,"form-container"],[1,"d-flex","justify-content-center",3,"formGroup","ngSubmit"],[1,"form-group"],["for","exampleInputEmail1"],["type","email","formControlName","email","id","email","name","email",1,"form-control",3,"ngClass"],[4,"ngIf"],["for","fullName"],["type","fullName","formControlName","fullName","id","fullname","name","fullname",1,"form-control",3,"ngClass"],["for","password"],["type","password","formControlName","password","id","password","name","password",1,"form-control",3,"ngClass"],["for","confirmPassword"],["type","password","formControlName","confirmPassword","id","confirmPassword","name","confirmPassword",1,"form-control",3,"ngClass"],["for","phone"],["type","phone","formControlName","phone","id","phone","name","phone",1,"form-control",3,"ngClass"],["type","submit",1,"btn","btn-primary"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"img",1),t.qZA(),t.TgZ(2,"div",2)(3,"div",3)(4,"form",4),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(5,"div")(6,"div",5)(7,"h3"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"br"),t.TgZ(11,"label",6),t._uU(12),t.ALo(13,"translate"),t.qZA(),t._UZ(14,"input",7),t.YNc(15,A,4,5,"span",8),t.qZA(),t._UZ(16,"br"),t.TgZ(17,"div",5)(18,"label",9),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",10),t.YNc(22,x,3,3,"span",8),t.qZA(),t._UZ(23,"br"),t.TgZ(24,"div",5)(25,"label",11),t._uU(26),t.ALo(27,"translate"),t.qZA(),t._UZ(28,"input",12),t.YNc(29,U,3,3,"span",8),t.qZA(),t._UZ(30,"br"),t.TgZ(31,"div",5)(32,"label",13),t._uU(33),t.ALo(34,"translate"),t.qZA(),t._UZ(35,"input",14),t.YNc(36,q,3,3,"span",8),t.qZA(),t._UZ(37,"br"),t.TgZ(38,"div",5)(39,"label",15),t._uU(40),t.ALo(41,"translate"),t.qZA(),t._UZ(42,"input",16),t.YNc(43,P,3,3,"span",8),t.qZA(),t._UZ(44,"br"),t.TgZ(45,"button",17),t._uU(46),t.ALo(47,"translate"),t.qZA()()()()()),2&o&&(t.xp6(4),t.Q6J("formGroup",n.registerForm),t.xp6(4),t.hij(" ",t.lcZ(9,18,"Sign up")," "),t.xp6(4),t.Oqu(t.lcZ(13,20,"Email address")),t.xp6(2),t.Q6J("ngClass",t.VKq(32,u,n.invalidField("email")||n.emailExists)),t.xp6(1),t.Q6J("ngIf",n.invalidField("email")||n.emailExists),t.xp6(4),t.Oqu(t.lcZ(20,22,"Full name")),t.xp6(2),t.Q6J("ngClass",t.VKq(34,u,n.invalidField("fullName"))),t.xp6(1),t.Q6J("ngIf",n.invalidField("fullName")),t.xp6(4),t.Oqu(t.lcZ(27,24,"Password")),t.xp6(2),t.Q6J("ngClass",t.VKq(36,u,n.invalidField("password"))),t.xp6(1),t.Q6J("ngIf",n.invalidField("password")),t.xp6(4),t.Oqu(t.lcZ(34,26,"Confirm Password")),t.xp6(2),t.Q6J("ngClass",t.VKq(38,u,n.isConfirmPasswordInvalid())),t.xp6(1),t.Q6J("ngIf",n.registerForm.hasError("notSame")&&n.registerForm.controls.confirmPassword.touched),t.xp6(4),t.Oqu(t.lcZ(41,28,"Phone")),t.xp6(2),t.Q6J("ngClass",t.VKq(40,u,n.invalidField("phone"))),t.xp6(1),t.Q6J("ngIf",n.invalidField("phone")),t.xp6(3),t.Oqu(t.lcZ(47,30,"Sign up")))},dependencies:[p.mk,p.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,m.X$],styles:["span[_ngcontent-%COMP%]{color:red;font-size:13px}.container[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #1996d5;border-radius:5px;padding:20px;max-width:500px;width:100%;box-shadow:0 2px 5px #0000001a}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.form-control[_ngcontent-%COMP%]{width:350px}.error[_ngcontent-%COMP%]{border-color:red}.btn-primary[_ngcontent-%COMP%]{font-weight:700;border-width:2px;width:127px}"]}),e})();var T=a(529),L=a(4230);function S(e,s){1&e&&(t.TgZ(0,"div",16),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Your profile has been updated")," "))}function y(e,s){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Enter a correct name"),""))}function N(e,s){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Enter a valid password"),""))}function O(e,s){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Passwords must match")))}function I(e,s){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Enter a correct number phone"),""))}const c=function(e){return{error:e}},J=[{path:"auth/settings",component:(()=>{class e{constructor(o,n,i,j){this.http=o,this.formBuilder=n,this.router=j,this.loginError=!1,this.updated=!1,this.baseURL="http://localhost:8080/api/reservation/"}ngOnInit(){const o=localStorage.getItem("currentUser"),n=o?JSON.parse(o):null;this.user=n,this.settingsForm=this.formBuilder.group({fullName:[this.user.fullName,[r.kI.required,r.kI.pattern(/^[a-zA-Z]+(\s[a-zA-Z]+)+$/)]],password:[this.user.password,[r.kI.required,r.kI.minLength(6)]],confirmPassword:[this.user.confirmPassword,[]],phone:[this.user.phone,[r.kI.required,r.kI.pattern(/^\d{9}$/)]]},{validator:this.checkPasswords})}checkPasswords(o){return o.controls.password.value===o.controls.confirmPassword.value?null:{notSame:!0}}invalidField(o){return this.settingsForm.controls[o].invalid&&(this.settingsForm.controls[o].touched||this.settingsForm.controls[o].dirty)}isConfirmPasswordInvalid(){const o=this.settingsForm.controls.confirmPassword;return this.settingsForm.hasError("notSame")&&o.touched}onSubmit(){this.user.fullName=this.settingsForm.controls.fullName.value,this.user.password=this.settingsForm.controls.password.value,this.user.confirmPassword=this.settingsForm.controls.confirmPassword.value,this.user.phone=this.settingsForm.controls.phone.value,this.http.put(`${this.baseURL}users/${this.user.id}`,this.user,{}).subscribe(o=>{console.log(o),this.updated=!0,localStorage.setItem("currentUser",JSON.stringify(o))},o=>console.log(o))}refreshPage(){this.router.navigateByUrl("/home").then(()=>{window.location.reload()})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(T.eN),t.Y36(r.qu),t.Y36(d.e),t.Y36(l.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-profile-settings"]],decls:50,vars:42,consts:[[1,"container"],[1,"alert-center"],["class","alert alert-success alert-container",4,"ngIf"],[1,"d-flex","justify-content-center",3,"formGroup","ngSubmit"],[1,"form-group"],["for","fullName"],["type","text","formControlName","fullName","id","fullName",1,"form-control",3,"ngClass"],[4,"ngIf"],["for","password"],["type","password","formControlName","password","id","password","name","password","placeholder","Password",1,"form-control",3,"ngClass"],["for","confirmPassword"],["type","password","formControlName","confirmPassword","id","confirmPassword","name","confirmPassword","placeholder","Confirm Password",1,"form-control",3,"ngClass"],["for","phone"],["type","phone","formControlName","phone","id","phone","name","phone",1,"form-control",3,"ngClass"],["type","submit",1,"btn","btn-primary"],["id","return",1,"btn",3,"click"],[1,"alert","alert-success","alert-container"]],template:function(o,n){1&o&&(t._UZ(0,"app-menu"),t.TgZ(1,"div",0),t._UZ(2,"br"),t.TgZ(3,"div",1),t.YNc(4,S,3,3,"div",2),t.qZA(),t.TgZ(5,"h2"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t._UZ(8,"hr"),t.TgZ(9,"form",3),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(10,"div")(11,"h4"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t._UZ(14,"br"),t.TgZ(15,"div",4)(16,"label",5),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._UZ(19,"input",6),t.YNc(20,y,3,3,"span",7),t.qZA(),t._UZ(21,"br"),t.TgZ(22,"div",4)(23,"label",8),t._uU(24),t.ALo(25,"translate"),t.qZA(),t._UZ(26,"input",9),t.YNc(27,N,3,3,"span",7),t.qZA(),t._UZ(28,"br"),t.TgZ(29,"div",4)(30,"label",10),t._uU(31),t.ALo(32,"translate"),t.qZA(),t._UZ(33,"input",11),t.YNc(34,O,3,3,"span",7),t.qZA(),t._UZ(35,"br"),t.TgZ(36,"div",4)(37,"label",12),t._uU(38),t.ALo(39,"translate"),t.qZA(),t._UZ(40,"input",13),t.YNc(41,I,3,3,"span",7),t.qZA(),t._UZ(42,"br")(43,"br"),t.TgZ(44,"button",14),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"button",15),t.NdJ("click",function(){return n.refreshPage()}),t._uU(48),t.ALo(49,"translate"),t.qZA()()()()),2&o&&(t.xp6(4),t.Q6J("ngIf",n.updated),t.xp6(2),t.hij(" ",t.lcZ(7,18,"My profile"),""),t.xp6(3),t.Q6J("formGroup",n.settingsForm),t.xp6(3),t.hij(" ",t.lcZ(13,20,"Edit profile"),""),t.xp6(5),t.Oqu(t.lcZ(18,22,"Full name")),t.xp6(2),t.Q6J("ngClass",t.VKq(34,c,n.invalidField("fullName"))),t.xp6(1),t.Q6J("ngIf",n.invalidField("fullName")),t.xp6(4),t.Oqu(t.lcZ(25,24,"Password")),t.xp6(2),t.Q6J("ngClass",t.VKq(36,c,n.invalidField("password"))),t.xp6(1),t.Q6J("ngIf",n.invalidField("password")),t.xp6(4),t.Oqu(t.lcZ(32,26,"Confirm Password")),t.xp6(2),t.Q6J("ngClass",t.VKq(38,c,n.isConfirmPasswordInvalid())),t.xp6(1),t.Q6J("ngIf",n.settingsForm.hasError("notSame")&&n.settingsForm.controls.confirmPassword.touched),t.xp6(4),t.Oqu(t.lcZ(39,28,"Phone")),t.xp6(2),t.Q6J("ngClass",t.VKq(40,c,n.invalidField("phone"))),t.xp6(1),t.Q6J("ngIf",n.invalidField("phone")),t.xp6(4),t.Oqu(t.lcZ(46,30,"Enviar")),t.xp6(3),t.hij(" ",t.lcZ(49,32,"Return")," "))},dependencies:[p.mk,p.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,L.M,m.X$],styles:["label[_ngcontent-%COMP%]{font-weight:700}#return[_ngcontent-%COMP%]{margin-left:50px}span[_ngcontent-%COMP%]{color:red;font-size:13px}.error[_ngcontent-%COMP%]{border-color:red}"]}),e})(),canActivate:[Z.H]},{path:"auth/login",component:C},{path:"auth/logout",component:b,canActivate:[Z.H]},{path:"auth/register-user",component:F}];let k=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.Bz.forChild(J),l.Bz]}),e})()}}]);